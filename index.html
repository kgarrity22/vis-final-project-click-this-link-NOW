<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Restaurants vs. COVID</title>

<!-- Load CSS files -->
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,800|Playfair+Display:700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/v4-shims.css">
  <link rel="stylesheet" href="css/milligram.min.css" />
  <link rel="stylesheet" href="css/style.css" />

<!-- Load script files -->
<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
    crossorigin="anonymous"></script>
<!-- <script src="js/jquery.scrollify.js"></script> -->
<script type = "text/javascript" src="https://d3js.org/d3.v6.min.js"></script>

<script src="js/graph-scroll.js"></script>


<!-- Scripts for Maps-->
<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcSiCJy8smv6Omp8TMXFINgjXxqDQqvus&callback=initMap&libraries=visualization&v=weekly"
  defer></script>

<script src="js/main.js" defer type="module"></script>

</head>

<!-- <script>
  $(function () {
    $(".page").css({
      height: $(window).height()
    });
    $.scrollify({
      section: "section",
      scrollbars: true
    });
  });
</script> -->

<body>
  <!--- TEST SECTIONS FOR SCROLLING!!!!!!!!!!-->

  <!--- this is where a right justified graph is-->
  





  <div class="progress-container">
    <div class="progress-bar" id="myBar"></div>
  </div>

  

  <!-- MAIN STRUCTURAL PAGE-->
  <section class="page-intro" data-section-name="introduction">
    <div class="container" id="page-intro">
      <h1>Restaurants vs. COVID</h1>
      <p class = "credits">Created by Kathleen, Dan, Kim, and Kieran</p>
      <br>
      <div class="text-block">
        <p>We will be diving into the restaurant industry and seeing how it fared in Boston after 6+ months of lock-down.</p>
        <p>The restaurant industry faces fierce competition in Boston as the condensed city allows great competition between business. But who
            fared the best? Let's take a look...
        </p>
        <p>(Scroll to navigate or use the arrows to jump)</p>
        
          <div class="button-row">
            <a href="#status-chart" class="scroll map"> <i class="fas fa-arrow-circle-down"></i></a> 
            <a href="about.html" class="scroll map"> <i class="fas fa-info-circle"></i> </a>
          </div>


      </div>
    </div>
    </div>
  </section>

  
  
  <!--- these are the text blocks that will scroll-->
  <div id="container" class="container-1">
    <div id="graph"></div>
    <div id="sections">
      <div>
        <h2 class="header">Restaurants by Neighborhood</h2>
        <div class="text-block">
          <p>Let's take a look at the breakdown of restaurants in Boston neighborhoods. The chart on the left shows the neighborhoods in Boston
            by neighborhood. The y-location of the bubble tells you how many restuarants a neighborhood has and the size of the bubble tells you the average rating 
            of all the restaurants in that neighborhood. Scroll to see some of the graph's highlights!
          </p>
        </div>
      </div>
      <br><br><br><br>
    
      <div>
        
        <div class="text-block">
          <p> We notice that the highest dot is for the the neighborhood of downtown Boston. This is where most of the restuarants
            in the city are loctaed. However, the average rating of these restuarants is only about 3.5
          </p>
        </div>
      </div>
      <br><br><br><br>
    
      <div>
        <div class="text-block">
          <p> A few other bubbles that stand out are Brookline and Cambridge. The large bubbles show that the restaurants in these 
            neighborhoods have high ratings. However, these neighborhoods also have very few restaurants.
          </p>
        </div>
      </div>
      <br><br><br><br>

      <div>
        <div class="text-block">
          <p> The North End is a neighborhood that hits the sweet spot. As shown by it's y-position, the North End has a middling number of restaurants.
            More significantly however, these restuarants have a very high average rating, suggesting that this would be a great neighborhood to grab a bite to eat.
          </p>
        </div>
      </div>
      <br><br><br><br>
      <br><br><br><br>

      <div>
        <div class="text-block">
          <p></p>
        </div>
      </div>
      <br><br><br><br>
      <br><br><br><br>
      <br><br><br><br>
      
    
    </div> <!--this is the end of sections-->
  </div> <!--this is the end of container-->

  <!--- TEST SECTIONS FOR SCROLLING!!!!!!!!!!-->

  <section class="status-map" data-section-name="status-section">
    <div class="inner" id="status-chart">

      <div class="visible" style="opacity:0">
          <div class=" text-block">
          <p id="chart-tip">Now try clicking on a dot to see more about the restaurants in a particular neighborhood!</p>
          </div>
      </div>
      
      <div class="chart1">
        <div id="barchart1">
            <div id="bar-tooltip"></div>
        </div>
        

        <div id="bubble-chart" class="hidden">
          <div id="neighb-name"></div>
          
            <div id="toolbar">
              <button type="button" id="return-to-chart" class="button active button-outline">Go Back</button>
              <br>
              <button type="button" id="all" class="button active button-outline">All</button>
              <button type="button" id="price" class="button button-outline">By Price</button>
              <button type="button" id="closed" class="button button-outline">By Open/Closed Status</button>
              <button type="button" id="rev_bin" class="button button-outline">By Number of Reviews</button>
              <button type="button" id="rating" class="button button-outline">By Avg. Rating</button>
            </div>
          
            
          <div id="bubble-tooltip"></div>
        </div>

        <div class="line-chart" class="hidden">
          <div id="button-holder"><button class="hidden3" id="returntobubbles">Go Back</button></div>
          <div id="line-name"></div>
        </div>

        
      </div>
      <div class="chart4"></div>
        
        <a href="#heatmap" class="scroll map"> <i class="fas fa-arrow-circle-down"></i></a>
    </div>
    
  </section>
  
  <!-- <section></section> -->

  <section class="page-bar" data-section-name="heatmap-section">
    <div class="inner" id="heatmap-chart">
      <h2 class="header">Heatmap of Boston</h2>
      <div class="text-block">
        <p>Check out this heatmap that demonstrates the rating distribution of restaurants in Boston.
          Red areas represent dense areas of highly rated restaurants, whereas green areas reprent lower rated restaurants.
          Navigate around this map to find the hotspots for the best restaurants around the city!
        </p>
        </div>
    <div id='heatmap'></div>
    <a href="#closedRestaurantMap" class="scroll map"> <i class="fas fa-arrow-circle-down"></i></a>
    </div>
    
  </section>

  <section class="page-bar" data-section-name="cuisine-section">
      <h2 class="header">How Cuisines Fared</h2>
      <div class="text-block">
        <p>
          The map below shows the location of 69 restaurants in Boston that closed permanently as a result of Covid-19. 
          Hover over any location to reveal a tooltip containing the restaurant's name, average Yelp rating, 
          price, and a list of cuisines that were served. To help guide your exploration, you can select different cuisines 
          from the list below to highlight the closed restaurants that served that particular cuisine. Each selected cuisine 
          will be added to the slope graph, although the highlighted circles will always represent your most recent selection. 
          If the slope graph begins to get too crowded, simply click "reset."
          <br>
          <br>
          The slope graph seeks to address the question of whether the closed restaurants were already receiving above or below 
          average Yelp reviews relative to restaurants that served the same cuisine. In this way, the chart provides an 
          indication of whether or not these businesses were already struggling before they were impacted by Covid restrictions. 
        </p>
        <div class="user-control">
          <select id="cuisine-category" class="form-control">
            <option value="Select A Cuisine" selected>Select A Cuisine</option>
            <option value='Better Closed Restaurants'>Better Closed Restaurants</option>
            <option value='Worse Closed Restaurants'>Worse Closed Restaurants</option>
            <option value='Top 10 Most Drastic Change'>Top 10 Most Drastic Change</option>
            <option value='American (New)'>American (New)</option>
            <option value='American (Traditional)'>American (Traditional)</option>
            <option value='Bakeries'>Bakeries</option>
            <option value='Bars'>Bars</option>
            <option value='Basque'>Basque</option>
            <option value='Beer Bar'>Beer Bar</option>
            <option value='Breakfast & Brunch'>Breakfast & Brunch</option>
            <option value='Breweries'>Breweries</option>
            <option value='Brewpubs'>Brewpubs</option>
            <option value='Burgers'>Burgers</option>
            <option value='Cafes'>Cafes</option>
            <option value='Caterers'>Caterers</option>
            <option value='Cocktail Bars'>Cocktail Bars</option>
            <option value='Coffee & Tea'>Coffee & Tea</option>
            <option value='Cooking Classes'>Cooking Classes</option>
            <option value='Delis'>Delis</option>
            <option value='Desserts'>Desserts</option>
            <option value='Diners'>Diners</option>
            <option value='Dive Bars'>Dive Bars</option>
            <option value='French'>French</option>
            <option value='Gastropubs'>Gastropubs</option>
            <option value='Gluten-Free'>Gluten-Free</option>
            <option value='Ice Cream & Frozen Yogurt'>Ice Cream & Frozen Yogurt</option>
            <option value='Irish'>Irish</option>
            <option value='Irish Pub'>Irish Pub</option>
            <option value='Italian'>Italian</option>
            <option value='Japanese'>Japanese</option>
            <option value='Jazz & Blues'>Jazz & Blues</option>
            <option value='Karaoke'>Karaoke</option>
            <option value='Latin American'>Latin American</option>
            <option value='Lounges'>Lounges</option>
            <option value='Mexican'>Mexican</option>
            <option value='Music Venues'>Music Venues</option>
            <option value='Noodles'>Noodles</option>
            <option value='Pizza'>Pizza</option>
            <option value='Polish'>Polish</option>
            <option value='Pool Halls'>Pool Halls</option>
            <option value='Pubs'>Pubs</option>
            <option value='Salad'>Salad</option>
            <option value='Sandwiches'>Sandwiches</option>
            <option value='Seafood'>Seafood</option>
            <option value='Southern'>Southern</option>
            <option value='Spanish'>Spanish</option>
            <option value='Specialty Food'>Specialty Food</option>
            <option value='Sports Bars'>Sports Bars</option>
            <option value='Steakhouses'>Steakhouses</option>
            <option value='Tapas/Small Plates'>Tapas/Small Plates</option>
            <option value='Vegan'>Vegan</option>
            <option value='Vietnamese'>Vietnamese</option>
            <option value='Whiskey Bars'>Whiskey Bars</option>
            <option value='Wine Bars'>Wine Bars</option>
          </select>
  
        </div>
        <button type="button" class="button button-outline" id="slopeGraphReset">Reset</button>
      </div>
  
      <div class = "row">
        <div class="column" id="closedRestaurantCol">
          <h3>Closed Restaurants</h3>     
          <div id='closedRestaurantMap'> 
          </div>
          <div id="closedRestaurantMapTooltip" class="hidden"></div>    
        </div>
        <div class="column">
          <div class="container"> 
              <div class='slopeChart'>
                <h3>Slope Chart</h3>     

                <!-- slope chart SVG here-->
              </div>
          </div>
    
        </div>

      </div>
  



      <div class="inner" id="cuisine-chart"> 
        <a href="#page-intro" class="scroll map"> <i class="fas fa-home"></i></a>

      </div>

  
  </section>

 
  <!-- Load JS libraries: D3 -->
  <script src="js/topojson.min.js"></script>
  <script src="js/d3.button.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
  <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Load JS libraries: Vega-lite -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.7.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.0-beta.10"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@5.1.3"></script>

  <!-- Load JS libraries: Scrollify -->
  <!-- <script src="js/jquery.scrollify.js"></script> -->

</body>

<script>

  // var oldWidth = 0
  // function render() {
  //   if (oldWidth == innerWidth) return
  //   oldWidth = innerWidth

  //   var width = height = d3.select('#graph').node().offsetWidth
  //   var r = 40


  //   if (innerWidth <= 925) {
  //     width = innerWidth
  //     height = innerHeight * .7
  //   }

    

  //   var colors = ['orange', 'purple', 'steelblue', 'pink', 'black']
  //   var gs = d3.graphScroll()
  //     .container(d3.select('.container-1'))
  //     .graph(d3.selectAll('container-1 #graph'))
  //     .eventId('uniqueId1')  // namespace for scroll and resize events
  //     .sections(d3.selectAll('.container-1 #sections > div'))
  //     .on('active', function (i) {
  //       console.log("Seeing what I IS: ", i)
  //       var circles = d3.selectAll(".points")
  //       var all_circles = circles._groups[0]
        
  //       // SELECTING BOSTON REstuarants
  //       if (i == 1){
  //         for (var j of circles){
  //           if (j.__data__.neighborhood == "Boston"){
  //             d3.select(j)
  //             .transition().duration(500)
  //             .style("fill", "navy")
  //           } else {
  //             d3.select(j)
  //               .style("fill", "pink")
  //               .attr("opacity", 0.3)
  //           }
  //         }
          
  //       } else if (i == 2 ) {
  //         for (var j of circles) {
  //           if (j.__data__.neighborhood == "Cambridge" || j.__data__.neighborhood == "Brookline") {
  //             d3.select(j)
  //               .transition().duration(500)
  //               .style("fill", "navy")
  //           } else {
  //             d3.select(j)
  //               .style("fill", "pink")
  //               .attr("opacity", 0.3)
  //           }
  //         }
  //       }
  //       else if (i == 3) {
  //         for (var j of circles) {
  //           if (j.__data__.neighborhood == "North End") {
  //             d3.select(j)
  //               .transition().duration(500)
  //               .style("fill", "navy")
  //           } else {
  //             d3.select(j)
  //               .style("fill", "pink")
  //               .attr("opacity", 0.3)
  //           }
  //         }

  //       }
  //       else if (i == 4) {
  //         d3.select("#graph")
  //           .attr("class", "hidden")
          
  //           const bars_chart = bars(".chart1", data);

  //       }


        



  //     })


    

  //   d3.select('#source')
  //     .style({ 'margin-bottom': window.innerHeight - 450 + 'px', padding: '100px' })
  // }
  // render()
  // d3.select(window).on('resize', render)


</script>
  


</html>